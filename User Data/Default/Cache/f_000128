var JSON;if(!JSON){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());(function(N,d,p,K,k,H){var b=this;var n=Math.floor(Math.random()*10000);var q=Function.prototype;var Q=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/;var R=/[\-\w]+\/\.\.\//;var F=/([^:])\/\//g;var I="";var o={};var M=N.easyXDM;var U="easyXDM_";var E;var y=false;var i;var h;function C(X,Z){var Y=typeof X[Z];return Y=="function"||(!!(Y=="object"&&X[Z]))||Y=="unknown"}function u(X,Y){return!!(typeof(X[Y])=="object"&&X[Y])}function r(X){return Object.prototype.toString.call(X)==="[object Array]"}function c(){var Z="Shockwave Flash",ad="application/x-shockwave-flash";if(!t(navigator.plugins)&&typeof navigator.plugins[Z]=="object"){var ab=navigator.plugins[Z].description;if(ab&&!t(navigator.mimeTypes)&&navigator.mimeTypes[ad]&&navigator.mimeTypes[ad].enabledPlugin){i=ab.match(/\d+/g)}}if(!i){var Y;try{Y=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");i=Array.prototype.slice.call(Y.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1);Y=null}catch(ac){}}if(!i){return false}var X=parseInt(i[0],10),aa=parseInt(i[1],10);h=X>9&&aa>0;return true}var v,x;if(C(N,"addEventListener")){v=function(Z,X,Y){Z.addEventListener(X,Y,false)};x=function(Z,X,Y){Z.removeEventListener(X,Y,false)}}else{if(C(N,"attachEvent")){v=function(X,Z,Y){X.attachEvent("on"+Z,Y)};x=function(X,Z,Y){X.detachEvent("on"+Z,Y)}}else{throw new Error("Browser not supported")}}var W=false,J=[],L;if("readyState"in d){L=d.readyState;W=L=="complete"||(~navigator.userAgent.indexOf("AppleWebKit/")&&(L=="loaded"||L=="interactive"))}else{W=!!d.body}function s(){if(W){return}W=true;for(var X=0;X<J.length;X++){J[X]()}J.length=0}if(!W){if(C(N,"addEventListener")){v(d,"DOMContentLoaded",s)}else{v(d,"readystatechange",function(){if(d.readyState=="complete"){s()}});if(d.documentElement.doScroll&&N===top){var g=function(){if(W){return}try{d.documentElement.doScroll("left")}catch(X){K(g,1);return}s()};g()}}v(N,"load",s)}function G(Y,X){if(W){Y.call(X);return}J.push(function(){Y.call(X)})}function m(){var Z=parent;if(I!==""){for(var X=0,Y=I.split(".");X<Y.length;X++){Z=Z[Y[X]]}}return Z.easyXDM}function e(X){N.easyXDM=M;I=X;if(I){U="easyXDM_"+I.replace(".","_")+"_"}return o}function z(X){return X.match(Q)[3]}function f(X){return X.match(Q)[4]||""}function j(Z){var X=Z.toLowerCase().match(Q);var aa=X[2],ab=X[3],Y=X[4]||"";if((aa=="http:"&&Y==":80")||(aa=="https:"&&Y==":443")){Y=""}return aa+"//"+ab+Y}function B(X){X=X.replace(F,"$1/");if(!X.match(/^(http||https):\/\//)){var Y=(X.substring(0,1)==="/")?"":p.pathname;if(Y.substring(Y.length-1)!=="/"){Y=Y.substring(0,Y.lastIndexOf("/")+1)}X=p.protocol+"//"+p.host+Y+X}while(R.test(X)){X=X.replace(R,"")}return X}function P(X,aa){var ac="",Z=X.indexOf("#");if(Z!==-1){ac=X.substring(Z);X=X.substring(0,Z)}var ab=[];for(var Y in aa){if(aa.hasOwnProperty(Y)){ab.push(Y+"="+H(aa[Y]))}}return X+(y?"#":(X.indexOf("?")==-1?"?":"&"))+ab.join("&")+ac}var S=(function(X){X=X.substring(1).split("&");var Z={},aa,Y=X.length;while(Y--){aa=X[Y].split("=");Z[aa[0]]=k(aa[1])}return Z}(/xdm_e=/.test(p.search)?p.search:p.hash));function t(X){return typeof X==="undefined"}var O=function(){var Y={};var Z={a:[1,2,3]},X='{"a":[1,2,3]}';if(typeof JSON!="undefined"&&typeof JSON.stringify==="function"&&JSON.stringify(Z).replace((/\s/g),"")===X){return JSON}if(Object.toJSON){if(Object.toJSON(Z).replace((/\s/g),"")===X){Y.stringify=Object.toJSON}}if(typeof String.prototype.evalJSON==="function"){Z=X.evalJSON();if(Z.a&&Z.a.length===3&&Z.a[2]===3){Y.parse=function(aa){return aa.evalJSON()}}}if(Y.stringify&&Y.parse){O=function(){return Y};return Y}return null};function T(X,Y,Z){var ab;for(var aa in Y){if(Y.hasOwnProperty(aa)){if(aa in X){ab=Y[aa];if(typeof ab==="object"){T(X[aa],ab,Z)}else{if(!Z){X[aa]=Y[aa]}}}else{X[aa]=Y[aa]}}}return X}function a(){var Y=d.body.appendChild(d.createElement("form")),X=Y.appendChild(d.createElement("input"));X.name=U+"TEST"+n;E=X!==Y.elements[X.name];d.body.removeChild(Y)}function A(Y){if(t(E)){a()}var ac;if(E){ac=d.createElement('<iframe name="'+Y.props.name+'"/>')}else{ac=d.createElement("IFRAME");ac.name=Y.props.name}ac.id=ac.name=Y.props.name;delete Y.props.name;if(typeof Y.container=="string"){Y.container=d.getElementById(Y.container)}if(!Y.container){T(ac.style,{position:"absolute",top:"-2000px",left:"0px"});Y.container=d.body}var ab=Y.props.src;Y.props.src="javascript:false";T(ac,Y.props);ac.border=ac.frameBorder=0;ac.allowTransparency=true;Y.container.appendChild(ac);if(Y.onLoad){v(ac,"load",Y.onLoad)}if(Y.usePost){var aa=Y.container.appendChild(d.createElement("form")),X;aa.target=ac.name;aa.action=ab;aa.method="POST";if(typeof(Y.usePost)==="object"){for(var Z in Y.usePost){if(Y.usePost.hasOwnProperty(Z)){if(E){X=d.createElement('<input name="'+Z+'"/>')}else{X=d.createElement("INPUT");X.name=Z}X.value=Y.usePost[Z];aa.appendChild(X)}}}aa.submit();aa.parentNode.removeChild(aa)}else{ac.src=ab}Y.props.src=ab;return ac}function V(aa,Z){if(typeof aa=="string"){aa=[aa]}var Y,X=aa.length;while(X--){Y=aa[X];Y=new RegExp(Y.substr(0,1)=="^"?Y:("^"+Y.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"));if(Y.test(Z)){return true}}return false}function l(Z){var ae=Z.protocol,Y;Z.isHost=Z.isHost||t(S.xdm_p);y=Z.hash||false;if(!Z.props){Z.props={}}if(!Z.isHost){Z.channel=S.xdm_c.replace(/["'<>\\]/g,"");Z.secret=S.xdm_s;Z.remote=S.xdm_e.replace(/["'<>\\]/g,"");ae=S.xdm_p;if(Z.acl&&!V(Z.acl,Z.remote)){throw new Error("Access denied for "+Z.remote)}}else{Z.remote=B(Z.remote);Z.channel=Z.channel||"default"+n++;Z.secret=Math.random().toString(16).substring(2);if(t(ae)){if(j(p.href)==j(Z.remote)){ae="4"}else{if(C(N,"postMessage")||C(d,"postMessage")){ae="1"}else{if(Z.swf&&C(N,"ActiveXObject")&&c()){ae="6"}else{if(navigator.product==="Gecko"&&"frameElement"in N&&navigator.userAgent.indexOf("WebKit")==-1){ae="5"}else{if(Z.remoteHelper){ae="2"}else{ae="0"}}}}}}}Z.protocol=ae;switch(ae){case"0":T(Z,{interval:100,delay:2000,useResize:true,useParent:false,usePolling:false},true);if(Z.isHost){if(!Z.local){var ac=p.protocol+"//"+p.host,X=d.body.getElementsByTagName("img"),ad;var aa=X.length;while(aa--){ad=X[aa];if(ad.src.substring(0,ac.length)===ac){Z.local=ad.src;break}}if(!Z.local){Z.local=N}}var ab={xdm_c:Z.channel,xdm_p:0};if(Z.local===N){Z.usePolling=true;Z.useParent=true;Z.local=p.protocol+"//"+p.host+p.pathname+p.search;ab.xdm_e=Z.local;ab.xdm_pa=1}else{ab.xdm_e=B(Z.local)}if(Z.container){Z.useResize=false;ab.xdm_po=1}Z.remote=P(Z.remote,ab)}else{T(Z,{channel:S.xdm_c,remote:S.xdm_e,useParent:!t(S.xdm_pa),usePolling:!t(S.xdm_po),useResize:Z.useParent?false:Z.useResize})}Y=[new o.stack.HashTransport(Z),new o.stack.ReliableBehavior({}),new o.stack.QueueBehavior({encode:true,maxLength:4000-Z.remote.length}),new o.stack.VerifyBehavior({initiate:Z.isHost})];break;case"1":Y=[new o.stack.PostMessageTransport(Z)];break;case"2":if(Z.isHost){Z.remoteHelper=B(Z.remoteHelper)}Y=[new o.stack.NameTransport(Z),new o.stack.QueueBehavior(),new o.stack.VerifyBehavior({initiate:Z.isHost})];break;case"3":Y=[new o.stack.NixTransport(Z)];break;case"4":Y=[new o.stack.SameOriginTransport(Z)];break;case"5":Y=[new o.stack.FrameElementTransport(Z)];break;case"6":if(!i){c()}Y=[new o.stack.FlashTransport(Z)];break}Y.push(new o.stack.QueueBehavior({lazy:Z.lazy,remove:true}));return Y}function D(aa){var ab,Z={incoming:function(ad,ac){this.up.incoming(ad,ac)},outgoing:function(ac,ad){this.down.outgoing(ac,ad)},callback:function(ac){this.up.callback(ac)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}};for(var Y=0,X=aa.length;Y<X;Y++){ab=aa[Y];T(ab,Z,true);if(Y!==0){ab.down=aa[Y-1]}if(Y!==X-1){ab.up=aa[Y+1]}}return ab}function w(X){X.up.down=X.down;X.down.up=X.up;X.up=X.down=null}T(o,{version:"2.4.19.3",query:S,stack:{},apply:T,getJSONObject:O,whenReady:G,noConflict:e});o.DomHelper={on:v,un:x,requiresJSON:function(X){if(!u(N,"JSON")){d.write('<script type="text/javascript" src="'+X+'"><\/script>')}}};(function(){var X={};o.Fn={set:function(Y,Z){X[Y]=Z},get:function(Z,Y){if(!X.hasOwnProperty(Z)){return}var aa=X[Z];if(Y){delete X[Z]}return aa}}}());o.Socket=function(Y){var X=D(l(Y).concat([{incoming:function(ab,aa){Y.onMessage(ab,aa)},callback:function(aa){if(Y.onReady){Y.onReady(aa)}}}])),Z=j(Y.remote);this.origin=j(Y.remote);this.destroy=function(){X.destroy()};this.postMessage=function(aa){X.outgoing(aa,Z)};X.init()};o.Rpc=function(Z,Y){if(Y.local){for(var ab in Y.local){if(Y.local.hasOwnProperty(ab)){var aa=Y.local[ab];if(typeof aa==="function"){Y.local[ab]={method:aa}}}}}var X=D(l(Z).concat([new o.stack.RpcBehavior(this,Y),{callback:function(ac){if(Z.onReady){Z.onReady(ac)}}}]));this.origin=j(Z.remote);this.destroy=function(){X.destroy()};X.init()};o.stack.SameOriginTransport=function(Y){var Z,ab,aa,X;return(Z={outgoing:function(ad,ae,ac){aa(ad);if(ac){ac()}},destroy:function(){if(ab){ab.parentNode.removeChild(ab);ab=null}},onDOMReady:function(){X=j(Y.remote);if(Y.isHost){T(Y.props,{src:P(Y.remote,{xdm_e:p.protocol+"//"+p.host+p.pathname,xdm_c:Y.channel,xdm_p:4}),name:U+Y.channel+"_provider"});ab=A(Y);o.Fn.set(Y.channel,function(ac){aa=ac;K(function(){Z.up.callback(true)},0);return function(ad){Z.up.incoming(ad,X)}})}else{aa=m().Fn.get(Y.channel,true)(function(ac){Z.up.incoming(ac,X)});K(function(){Z.up.callback(true)},0)}},init:function(){G(Z.onDOMReady,Z)}})};o.stack.FlashTransport=function(aa){var ac,X,ab,ad,Y,ae;function af(ah,ag){K(function(){ac.up.incoming(ah,ad)},0)}function Z(ah){var ag=aa.swf+"?host="+aa.isHost;var aj="easyXDM_swf_"+Math.floor(Math.random()*10000);o.Fn.set("flash_loaded"+ah.replace(/[\-.]/g,"_"),function(){o.stack.FlashTransport[ah].swf=Y=ae.firstChild;var ak=o.stack.FlashTransport[ah].queue;for(var al=0;al<ak.length;al++){ak[al]()}ak.length=0});if(aa.swfContainer){ae=(typeof aa.swfContainer=="string")?d.getElementById(aa.swfContainer):aa.swfContainer}else{ae=d.createElement("div");T(ae.style,h&&aa.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0});d.body.appendChild(ae)}var ai="callback=flash_loaded"+H(ah.replace(/[\-.]/g,"_"))+"&proto="+b.location.protocol+"&domain="+H(z(b.location.href))+"&port="+H(f(b.location.href))+"&ns="+H(I);ae.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+aj+"' data='"+ag+"'><param name='allowScriptAccess' value='always'></param><param name='wmode' value='transparent'><param name='movie' value='"+ag+"'></param><param name='flashvars' value='"+ai+"'></param><embed type='application/x-shockwave-flash' FlashVars='"+ai+"' allowScriptAccess='always' wmode='transparent' src='"+ag+"' height='1' width='1'></embed></object>"}return(ac={outgoing:function(ah,ai,ag){Y.postMessage(aa.channel,ah.toString());if(ag){ag()}},destroy:function(){try{Y.destroyChannel(aa.channel)}catch(ag){}Y=null;if(X){X.parentNode.removeChild(X);X=null}},onDOMReady:function(){ad=aa.remote;o.Fn.set("flash_"+aa.channel+"_init",function(){K(function(){ac.up.callback(true)})});o.Fn.set("flash_"+aa.channel+"_onMessage",af);aa.swf=B(aa.swf);var ah=z(aa.swf);var ag=function(){o.stack.FlashTransport[ah].init=true;Y=o.stack.FlashTransport[ah].swf;Y.createChannel(aa.channel,aa.secret,j(aa.remote),aa.isHost);if(aa.isHost){if(h&&aa.swfNoThrottle){T(aa.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"})}T(aa.props,{src:P(aa.remote,{xdm_e:j(p.href),xdm_c:aa.channel,xdm_p:6,xdm_s:aa.secret}),name:U+aa.channel+"_provider"});X=A(aa)}};if(o.stack.FlashTransport[ah]&&o.stack.FlashTransport[ah].init){ag()}else{if(!o.stack.FlashTransport[ah]){o.stack.FlashTransport[ah]={queue:[ag]};Z(ah)}else{o.stack.FlashTransport[ah].queue.push(ag)}}},init:function(){G(ac.onDOMReady,ac)}})};o.stack.PostMessageTransport=function(aa){var ac,ad,Y,Z;function X(ae){if(ae.origin){return j(ae.origin)}if(ae.uri){return j(ae.uri)}if(ae.domain){return p.protocol+"//"+ae.domain}throw"Unable to retrieve the origin of the event"}function ab(af){var ae=X(af);if(ae==Z&&af.data.substring(0,aa.channel.length+1)==aa.channel+" "){ac.up.incoming(af.data.substring(aa.channel.length+1),ae)}}return(ac={outgoing:function(af,ag,ae){Y.postMessage(aa.channel+" "+af,ag||Z);if(ae){ae()}},destroy:function(){x(N,"message",ab);if(ad){Y=null;ad.parentNode.removeChild(ad);ad=null}},onDOMReady:function(){Z=j(aa.remote);if(aa.isHost){var ae=function(af){if(af.data==aa.channel+"-ready"){Y=("postMessage"in ad.contentWindow)?ad.contentWindow:ad.contentWindow.document;x(N,"message",ae);v(N,"message",ab);K(function(){ac.up.callback(true)},0)}};v(N,"message",ae);T(aa.props,{src:P(aa.remote,{xdm_e:j(p.href),xdm_c:aa.channel,xdm_p:1}),name:U+aa.channel+"_provider"});ad=A(aa)}else{v(N,"message",ab);Y=("postMessage"in N.parent)?N.parent:N.parent.document;Y.postMessage(aa.channel+"-ready",Z);K(function(){ac.up.callback(true)},0)}},init:function(){G(ac.onDOMReady,ac)}})};o.stack.FrameElementTransport=function(Y){var Z,ab,aa,X;return(Z={outgoing:function(ad,ae,ac){aa.call(this,ad);if(ac){ac()}},destroy:function(){if(ab){ab.parentNode.removeChild(ab);ab=null}},onDOMReady:function(){X=j(Y.remote);if(Y.isHost){T(Y.props,{src:P(Y.remote,{xdm_e:j(p.href),xdm_c:Y.channel,xdm_p:5}),name:U+Y.channel+"_provider"});ab=A(Y);ab.fn=function(ac){delete ab.fn;aa=ac;K(function(){Z.up.callback(true)},0);return function(ad){Z.up.incoming(ad,X)}}}else{if(d.referrer&&j(d.referrer)!=S.xdm_e){N.top.location=S.xdm_e}aa=N.frameElement.fn(function(ac){Z.up.incoming(ac,X)});Z.up.callback(true)}},init:function(){G(Z.onDOMReady,Z)}})};o.stack.NameTransport=function(ab){var ac;var ae,ai,aa,ag,ah,Y,X;function af(al){var ak=ab.remoteHelper+(ae?"#_3":"#_2")+ab.channel;ai.contentWindow.sendMessage(al,ak)}function ad(){if(ae){if(++ag===2||!ae){ac.up.callback(true)}}else{af("ready");ac.up.callback(true)}}function aj(ak){ac.up.incoming(ak,Y)}function Z(){if(ah){K(function(){ah(true)},0)}}return(ac={outgoing:function(al,am,ak){ah=ak;af(al)},destroy:function(){ai.parentNode.removeChild(ai);ai=null;if(ae){aa.parentNode.removeChild(aa);aa=null}},onDOMReady:function(){ae=ab.isHost;ag=0;Y=j(ab.remote);ab.local=B(ab.local);if(ae){o.Fn.set(ab.channel,function(al){if(ae&&al==="ready"){o.Fn.set(ab.channel,aj);ad()}});X=P(ab.remote,{xdm_e:ab.local,xdm_c:ab.channel,xdm_p:2});T(ab.props,{src:X+"#"+ab.channel,name:U+ab.channel+"_provider"});aa=A(ab)}else{ab.remoteHelper=ab.remote;o.Fn.set(ab.channel,aj)}var ak=function(){var al=ai||this;x(al,"load",ak);o.Fn.set(ab.channel+"_load",Z);(function am(){if(typeof al.contentWindow.sendMessage=="function"){ad()}else{K(am,50)}}())};ai=A({props:{src:ab.local+"#_4"+ab.channel},onLoad:ak})},init:function(){G(ac.onDOMReady,ac)}})};o.stack.HashTransport=function(Z){var ac;var ah=this,af,aa,X,ad,am,ab,al;var ag,Y;function ak(ao){if(!al){return}var an=Z.remote+"#"+(am++)+"_"+ao;((af||!ag)?al.contentWindow:al).location=an}function ae(an){ad=an;ac.up.incoming(ad.substring(ad.indexOf("_")+1),Y)}function aj(){if(!ab){return}var an=ab.location.href,ap="",ao=an.indexOf("#");if(ao!=-1){ap=an.substring(ao)}if(ap&&ap!=ad){ae(ap)}}function ai(){aa=setInterval(aj,X)}return(ac={outgoing:function(an,ao){ak(an)},destroy:function(){N.clearInterval(aa);if(af||!ag){al.parentNode.removeChild(al)}al=null},onDOMReady:function(){af=Z.isHost;X=Z.interval;ad="#"+Z.channel;am=0;ag=Z.useParent;Y=j(Z.remote);if(af){T(Z.props,{src:Z.remote,name:U+Z.channel+"_provider"});if(ag){Z.onLoad=function(){ab=N;ai();ac.up.callback(true)}}else{var ap=0,an=Z.delay/50;(function ao(){if(++ap>an){throw new Error("Unable to reference listenerwindow")}try{ab=al.contentWindow.frames[U+Z.channel+"_consumer"]}catch(aq){}if(ab){ai();ac.up.callback(true)}else{K(ao,50)}}())}al=A(Z)}else{ab=N;ai();if(ag){al=parent;ac.up.callback(true)}else{T(Z,{props:{src:Z.remote+"#"+Z.channel+new Date(),name:U+Z.channel+"_consumer"},onLoad:function(){ac.up.callback(true)}});al=A(Z)}}},init:function(){G(ac.onDOMReady,ac)}})};o.stack.ReliableBehavior=function(Y){var aa,ac;var ab=0,X=0,Z="";return(aa={incoming:function(af,ad){var ae=af.indexOf("_"),ag=af.substring(0,ae).split(",");af=af.substring(ae+1);if(ag[0]==ab){Z="";if(ac){ac(true)}}if(af.length>0){aa.down.outgoing(ag[1]+","+ab+"_"+Z,ad);if(X!=ag[1]){X=ag[1];aa.up.incoming(af,ad)}}},outgoing:function(af,ad,ae){Z=af;ac=ae;aa.down.outgoing(X+","+(++ab)+"_"+af,ad)}})};o.stack.QueueBehavior=function(Z){var ac,ad=[],ag=true,aa="",af,X=0,Y=false,ab=false;function ae(){if(Z.remove&&ad.length===0){w(ac);return}if(ag||ad.length===0||af){return}ag=true;var ah=ad.shift();ac.down.outgoing(ah.data,ah.origin,function(ai){ag=false;if(ah.callback){K(function(){ah.callback(ai)},0)}ae()})}return(ac={init:function(){if(t(Z)){Z={}}if(Z.maxLength){X=Z.maxLength;ab=true}if(Z.lazy){Y=true}else{ac.down.init()}},callback:function(ai){ag=false;var ah=ac.up;ae();ah.callback(ai)},incoming:function(ak,ai){if(ab){var aj=ak.indexOf("_"),ah=parseInt(ak.substring(0,aj),10);aa+=ak.substring(aj+1);if(ah===0){if(Z.encode){aa=k(aa)}ac.up.incoming(aa,ai);aa=""}}else{ac.up.incoming(ak,ai)}},outgoing:function(al,ai,ak){if(Z.encode){al=H(al)}var ah=[],aj;if(ab){while(al.length!==0){aj=al.substring(0,X);al=al.substring(aj.length);ah.push(aj)}while((aj=ah.shift())){ad.push({data:ah.length+"_"+aj,origin:ai,callback:ah.length===0?ak:null})}}else{ad.push({data:al,origin:ai,callback:ak})}if(Y){ac.down.init()}else{ae()}},destroy:function(){af=true;ac.down.destroy()}})};o.stack.VerifyBehavior=function(ab){var ac,aa,Y,Z=false;function X(){aa=Math.random().toString(16).substring(2);ac.down.outgoing(aa)}return(ac={incoming:function(af,ad){var ae=af.indexOf("_");if(ae===-1){if(af===aa){ac.up.callback(true)}else{if(!Y){Y=af;if(!ab.initiate){X()}ac.down.outgoing(af)}}}else{if(af.substring(0,ae)===Y){ac.up.incoming(af.substring(ae+1),ad)}}},outgoing:function(af,ad,ae){ac.down.outgoing(aa+"_"+af,ad,ae)},callback:function(ad){if(ab.initiate){X()}}})};o.stack.RpcBehavior=function(ad,Y){var aa,af=Y.serializer||O();var ae=0,ac={};function X(ag){ag.jsonrpc="2.0";aa.down.outgoing(af.stringify(ag))}function ab(ag,ai){var ah=Array.prototype.slice;return function(){var aj=arguments.length,al,ak={method:ai};if(aj>0&&typeof arguments[aj-1]==="function"){if(aj>1&&typeof arguments[aj-2]==="function"){al={success:arguments[aj-2],error:arguments[aj-1]};ak.params=ah.call(arguments,0,aj-2)}else{al={success:arguments[aj-1]};ak.params=ah.call(arguments,0,aj-1)}ac[""+(++ae)]=al;ak.id=ae}else{ak.params=ah.call(arguments,0)}if(ag.namedParams&&ak.params.length===1){ak.params=ak.params[0]}X(ak)}}function Z(an,am,ai,al){if(!ai){if(am){X({id:am,error:{code:-32601,message:"Procedure not found."}})}return}var ak,ah;if(am){ak=function(ao){ak=q;X({id:am,result:ao})};ah=function(ao,ap){ah=q;var aq={id:am,error:{code:-32099,message:ao}};if(ap){aq.error.data=ap}X(aq)}}else{ak=ah=q}if(!r(al)){al=[al]}try{var ag=ai.method.apply(ai.scope,al.concat([ak,ah]));if(!t(ag)){ak(ag)}}catch(aj){ah(aj.message)}}return(aa={incoming:function(ah,ag){var ai=af.parse(ah);if(ai.method){if(Y.handle){Y.handle(ai,X)}else{Z(ai.method,ai.id,Y.local[ai.method],ai.params)}}else{var aj=ac[ai.id];if(ai.error){if(aj.error){aj.error(ai.error)}}else{if(aj.success){aj.success(ai.result)}}delete ac[ai.id]}},init:function(){if(Y.remote){for(var ag in Y.remote){if(Y.remote.hasOwnProperty(ag)){ad[ag]=ab(Y.remote[ag],ag)}}}aa.down.init()},destroy:function(){for(var ag in Y.remote){if(Y.remote.hasOwnProperty(ag)&&ad.hasOwnProperty(ag)){delete ad[ag]}}aa.down.destroy()}})};b.easyXDM=o})(window,document,location,window.setTimeout,decodeURIComponent,encodeURIComponent);var sailPlayUtils={displayCache:{},isFunction:function(functionToCheck){var getType={};return functionToCheck&&getType.toString.call(functionToCheck)==='[object Function]';},isUndefined:function(obj){return typeof obj==='undefined';},getCookie:function(name){var matches=document.cookie.match(new RegExp("(?:^|; )"+name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,'\\$1')+"=([^;]*)"));return matches?decodeURIComponent(matches[1]):undefined;},setCookie:function(name,value,props){props=props||{};var exp=props.expires;if(typeof exp=="number"&&exp){var d=new Date();d.setTime(d.getTime()+exp*1000);exp=props.expires=d;}
if(exp&&exp.toUTCString){props.expires=exp.toUTCString();}
value=encodeURIComponent(value);var updatedCookie=name+"="+value;for(var propName in props){updatedCookie+="; "+propName;var propValue=props[propName];if(propValue!==true){updatedCookie+="="+propValue;}}
document.cookie=updatedCookie;},getElementsByAttributeValue:function(attribute,value,context){var arr=[];var allElements=(context||document).getElementsByTagName('*');for(var i=0,len=allElements.length;i<len;i+=1){var elm=allElements[i]
if(elm.getAttribute(attribute)==value){arr.push(elm);}}
return arr;},getElementsByAttribute:function(attribute,context){var nodeList=(context||document).getElementsByTagName('*');var nodeArray=[];for(var i=0,node;node=nodeList[i];i+=1){if(node.getAttribute(attribute))nodeArray.push(node);}
return nodeArray;},forEach:function(arr,callback){for(var i=0,len=arr.length;i<len;i+=1){var obj=arr[i];callback&&callback(obj);}},deleteCookie:function(name){sailPlayUtils.setCookie(name,null,{expires:-1});},guid:function(){function s4(){return Math.floor((1+Math.random())*0x10000).toString(16).substring(1);}
return s4()+s4()+'-'+s4()+'-'+s4()+'-'+
s4()+'-'+s4()+s4()+s4();},getRealDisplay:function(elem){if(elem.currentStyle){return elem.currentStyle.display}else if(window.getComputedStyle){var computedStyle=window.getComputedStyle(elem,null);return computedStyle.getPropertyValue('display');}},hide:function(el){if(!el.getAttribute('displayOld')){el.setAttribute("displayOld",el.style.display);}
el.style.display="none";},isHidden:function(el){var width=el.offsetWidth,height=el.offsetHeight,tr=el.nodeName.toLowerCase()==="tr";return width===0&&height===0&&!tr?true:width>0&&height>0&&!tr?false:this.getRealDisplay(el);},toggle:function(el){this.isHidden(el)?this.show(el):this.hide(el);},show:function(el){if(this.getRealDisplay(el)!='none')return;var old=el.getAttribute("displayOld");el.style.display=old||"";if(this.getRealDisplay(el)==="none"){var nodeName=el.nodeName,body=document.body,display;if(this.displayCache[nodeName]){display=this.displayCache[nodeName];}else{var testElem=document.createElement(nodeName);body.appendChild(testElem);display=this.getRealDisplay(testElem);if(display==="none"){display="block";}
body.removeChild(testElem);this.displayCache[nodeName]=display;}
el.setAttribute('displayOld',display);el.style.display=display;}},addClass:function(element,className){var cn=element.className; if(cn.split(' ').indexOf(className)!=-1){return;} 
if(cn!=''){className=' '+className;}
element.className=cn+className;},removeClass:function(element,className){var cn=element.className.split(' ');sailPlayUtils.forEach(cn,function(name){if(name==className)cn.splice(cn.indexOf(className),1);});cn.length<1?element.removeAttribute('class'):element.className=cn.join(' ');},onClick:function(handlers){document.onclick=function(event){var el=event.target;handlers['.'+el.className](event,el);};},insertCss:function(cssText){var head=document.getElementsByTagName('head')[0],style=document.createElement('style');style.type='text/css';if(style.styleSheet){style.styleSheet.cssText=cssText;}else{style.appendChild(document.createTextNode(cssText));}
head.appendChild(style);},replaceAll:function(find,replace,str){return str.replace(new RegExp(find,'g'),replace);},getGradientStyle:function(colors){var gradientInit="background: _startColor;"+"background: -moz-linear-gradient(top, _startColor 0%, _endColor 100%);"+"background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,_startColor), color-stop(100%,_endColor));"+"background: -webkit-linear-gradient(top, _startColor 0%,_endColor 100%);"+"background: -o-linear-gradient(top, _startColor 0%,_endColor 100%);"+"background: -ms-linear-gradient(top, _startColor 0%,_endColor 100%);"+"background: linear-gradient(to bottom, _startColor 0%,_endColor 100%);"+"filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='_startColor', endColorstr='_endColor',GradientType=0 );",gradientRes;gradientRes=sailPlayUtils.replaceAll('_startColor',colors[0],gradientInit);gradientRes=sailPlayUtils.replaceAll('_endColor',colors[1],gradientRes);return gradientRes;},handleMouseLeave:function(handler){return function(e){e=e||event; var toElement=e.relatedTarget||e.toElement;
while(toElement&&toElement!==this){toElement=toElement.parentNode;}
if(toElement==this){ return;}
return handler.call(this,e);};},handleMouseEnter:function(handler){return function(e){e=e||event; var toElement=e.relatedTarget||e.srcElement;
while(toElement&&toElement!==this){toElement=toElement.parentNode;}
if(toElement==this){ return;}
return handler.call(this,e);};},toISODate:function(date){return date.getUTCFullYear()+'-'+
('00'+(date.getUTCMonth()+1)).slice(-2)+'-'+
('00'+date.getUTCDate()).slice(-2)+' '+
('00'+date.getUTCHours()).slice(-2)+':'+
('00'+date.getUTCMinutes()).slice(-2)+':'+
('00'+date.getUTCSeconds()).slice(-2);}, JSONP:(function(){var counter=0,head,query,key,window=this;function load(url){var script=document.createElement('script'),done=false;script.src=url;script.async=true;script.onload=script.onreadystatechange=function(){if(!done&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){done=true;script.onload=script.onreadystatechange=null;if(script&&script.parentNode){script.parentNode.removeChild(script);}}};if(!head){head=document.getElementsByTagName('head')[0];}
head.appendChild(script);}
function jsonp(url,params,callback){query="?";params=params||{};for(key in params){if(params.hasOwnProperty(key)){query+=encodeURIComponent(key)+"="+encodeURIComponent(params[key])+"&";}}
var jsonp="json"+(++counter);window[jsonp]=function(data){callback(data);SailPlayExternalApp.trigger('SP_jsonp_loaded',data);try{delete window[jsonp];}catch(e){}
window[jsonp]=null;};load(url+query+"callback="+jsonp);return jsonp;}
return{get:jsonp};}()),animate:function(opts){var start=new Date;var id=setInterval(function(){var timePassed=new Date-start;var progress=timePassed/opts.duration;if(progress>1)progress=1;var delta=opts.delta(progress);opts.step(delta);if(progress==1){clearInterval(id);if(typeof opts.finish!=='undefined')
opts.finish();}},opts.delay||10);opts.el.animationInterval=id;},stopAnimate:function(opts){if(typeof opts.el.animationInterval!=='undefined'){clearInterval(opts.el.animationInterval);if(typeof opts.toState!=='undefined')
opts.toState();}},animateShowHide:function(el,type,duration,callback){var self=sailPlayUtils;self.animate({el:el,duration:duration,delay:40,delta:function(delta){if(type=='show')
return delta;else
return 1-delta;},step:function(delta){el.style.opacity=delta;},finish:callback});},bindWindowFocusChange:function(func){var existonpageshow=window.onpageshow,existonpagehide=window.onpagehide,existonfocus=window.onfocus,existonblur=window.onblur;window.onpageshow=function(evt){if(!sailPlayUtils.isUndefined(existonblur)&&sailPlayUtils.isFunction(existonpageshow))
existonpageshow(evt);onchange(evt);};window.onpagehide=function(evt){if(!sailPlayUtils.isUndefined(existonblur)&&sailPlayUtils.isFunction(existonpagehide))
existonpagehide(evt);onchange(evt);};window.onfocus=function(evt){if(!sailPlayUtils.isUndefined(existonblur)&&sailPlayUtils.isFunction(existonfocus))
existonfocus(evt);onchange(evt);};window.onblur=function(evt){if(!sailPlayUtils.isUndefined(existonblur)&&sailPlayUtils.isFunction(existonblur))
existonblur(evt);onchange(evt);};function onchange(evt){var evtMap={focus:true,focusin:true,pageshow:true,blur:false,focusout:false,pagehide:false};evt=evt||window.event;if(evt.type in evtMap)
func(evtMap[evt.type]);}},scrollPosition:function(){var doc=document.documentElement;var left=(window.pageXOffset||doc.scrollLeft)-(doc.clientLeft||0);var top=(window.pageYOffset||doc.scrollTop)-(doc.clientTop||0);return{left:left,top:top}},_GETParams:{_cached:false},GETParams:function(){var a=window.location.search.substr(1).split('&');if(a=="")return{};if(!this._GETParams._cached){for(var i=0;i<a.length;++i)
{var p=a[i].split('=');if(p.length!=2)continue;this._GETParams[p[0]]=decodeURIComponent(p[1].replace(/\+/g," "));}
this._GETParams._cached=true;}
return this._GETParams;},shortNumber:function(number){function abbreviate(number,maxPlaces,forcePlaces,forceLetter){number=Number(number)
forceLetter=forceLetter||false
if(forceLetter!==false){return annotate(number,maxPlaces,forcePlaces,forceLetter)}
var abbr;if(number>=1e12){abbr='T';}
else if(number>=1e9){abbr='B';}
else if(number>=1e6){abbr='M';}
else if(number>=1e3){abbr='K';}
else{abbr='';}
return annotate(number,maxPlaces,forcePlaces,abbr);}
function annotate(number,maxPlaces,forcePlaces,abbr){ var rounded=0
switch(abbr){case'T':rounded=number/1e12;break
case'B':rounded=number/1e9;break
case'M':rounded=number/1e6;break
case'K':rounded=number/1e3;break
case'':rounded=number;break}
if(maxPlaces!==false){var test=new RegExp('\\.\\d{'+(maxPlaces+1)+',}$')
if(test.test((''+rounded))){rounded=rounded.toFixed(maxPlaces);}}
if(forcePlaces!==false){rounded=Number(rounded).toFixed(forcePlaces);}
var splitted=rounded.toString().split('.');var decimal=splitted[1]?splitted[1][0]:'0';return splitted[0]+(decimal!='0'?('.'+decimal):'')+abbr;}
return abbreviate(number,2,false,false);}};var SPTicket={init:function(opts){this.config={showUserPoints:false,text:'УЗНАЙТЕ, СКОЛЬКО У ВАС БОНУСНЫХ БАЛЛОВ '||'УЗНАЙТЕ, СКОЛЬКО У ВАС БОНУСНЫХ БАЛЛОВ',pointsText:'У ВАС ЕСТЬ БОНУСНЫЕ БАЛЛЫ'||'У вас есть бонусные баллы',btnText:'участвовать'||'Посмотреть',picUrl:''||opts.staticUrl+'css/external/img/ticket_points_flag.png?v=1'};this.opts=opts;this.cacheElements();},cacheElements:function(){if(this.opts.isTicketEnabled==undefined||this.opts.isTicketEnabled==true){this.ticket=document.createElement('div');this.ticket.id='show_spex_popup';this.ticket.className='spex_ticket spex_custom_body '+this.getClassTicketPosition();document.body.appendChild(this.ticket);if(sailPlayUtils.getCookie('sp_popup_hidden_mode')){this.ticket.classList.add('hiddenMode')}
this.ticketText=document.createElement('div');this.ticketText.id='spex_ticket_text';this.ticketText.className='spex_ticket_text';this.ticketText.innerHTML=this.config.text;this.ticketPicWrapper=document.createElement('div');this.ticketPicWrapper.className='spex_ticket_pic';this.ticketPic=document.createElement('img');this.ticketPic.id='spex_ticket_img spex_custom_image';this.ticketPic.src=this.config.picUrl;this.ticketPoints=document.createElement('div');this.ticketPoints.id='spex_ticket_user_points';this.ticketPoints.className='spex_ticket_user_points spex_custom_user_points';this.ticketClearfix=document.createElement('div');this.ticketClearfix.className='spex_clearfix';this.ticketBtn=document.createElement('div');this.ticketBtn.id='spex_ticket_btn';this.ticketBtn.className='spex_ticket_btn spex_custom_button';this.ticketBtn.innerHTML=this.config.btnText;if(this.opts.btnHide&&!sailPlayUtils.getCookie('sp_popup_hidden_mode')){this.hideBtn=document.createElement('div');this.hideBtn.className='spex_popup_close';this.ticket.appendChild(this.hideBtn);}
this.ticketPicWrapper.appendChild(this.ticketPic);this.ticketPicWrapper.appendChild(this.ticketPoints);this.ticket.appendChild(this.ticketText);this.ticket.appendChild(this.ticketPicWrapper);this.ticket.appendChild(this.ticketClearfix);this.ticket.appendChild(this.ticketBtn);}},getClassTicketPosition:function(){var classesVertical={top:'spex_ticket_top',center:'spex_ticket_center',bottom:'spex_ticket_bottom'},classesHorizontal={left:'spex_ticket_left',right:'spex_ticket_right',center:'spex_ticket_horiz_center'};return classesVertical[this.opts.position[0]]+' '+classesHorizontal[this.opts.position[1]];}};var SailPlayExternalApp={ _handlers:{},on:function(event,handler){if(typeof(this._handlers[event])=="undefined")
this._handlers[event]=[];this._handlers[event].push(handler);},trigger:function(event,data){if(this._handlers[event]){for(var i=0;i<this._handlers[event].length;i++){this._handlers[event][i](data);}}}, isPopupVisible:false,callbacks:{},runCallback:function(eventName){var self=SailPlayExternalApp;if(typeof self.callbacks[eventName]!=='undefined')self.callbacks[eventName]();},init:function(options){var protocol=location.protocol;if(protocol=='file:'){protocol='http:';}
this.staticUrl='//sailplay.cdnvideo.ru/static/';this.sailPlayDomain=options.sailPlayDomain||protocol+'//sailplay.ru';this.popupUrl=this.sailPlayDomain+'/external/';this.options=options;this.options.staticUrl=this.staticUrl;this.options.popupUrl=this.popupUrl;this.options.apiDomain=this.sailPlayDomain;this.initApi(this.options);sailPlayUtils.insertCss('#spex_popup_overlay{position:fixed;display:none;top:0;left:0;right:0;bottom:0;background:url("//sailplay.cdnvideo.ru/static/css/external/img/bg_overlay.png");z-index:99996;overflow-y:auto}.spex_popup_wrapper,.spex_popup{-moz-border-radius:5px;-webkit-border-radius:5px;border-radius:5px;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box}.spex_popup_wrapper{position:absolute;display:none;width:710px;padding:10px;top:30px;left:50%;margin-left:-355px;background:url("//sailplay.cdnvideo.ru/static/css/external/img/bg_overlay.png");z-index:99997;overflow:hidden}.spex_popup_wrapper .spex_popup{background-color:#fff;color:#000;width:710px}.spex_popup{position:relative}.spex_popup_wrapper .spex_popup #spex_close_btn{position:absolute;z-index:99999;width:22px;height:20px;right:10px;top:7px;background:url("//sailplay.cdnvideo.ru/static/css/external/img/close_btn.png")}.spex_popup_wrapper .spex_popup #spex_close_btn:hover{cursor:pointer}.spex_popup_wrapper .spex_popup #spex_loader{height:16px;width:16px;position:absolute;top:50%;left:50%;margin:-16px 0 0 -16px}.spex_popup_wrapper .spex_popup iframe{z-index:99998;width:710px;border:0;margin:0;padding:0}.spex_clearfix{clear:both}.spex_ticket,.spex_notification{border-radius:5px;position:fixed;z-index:99994;overflow:hidden;margin:0;font-size:10px;line-height:14px;font-weight:bold;font-family:"Arial",sans-serif;-webkit-box-shadow:1px 1px 24px rgba(50,50,50,0.4);-moz-box-shadow:1px 1px 24px rgba(50,50,50,0.4);box-shadow:1px 1px 24px rgba(50,50,50,0.4);-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box}.spex_ticket{width:73px;padding:5px 8px 5px 5px;text-align:center;border:3px solid #2394d6;background-color:#fff;color:#2394d6}.spex_ticket:hover{cursor:pointer;opacity:.9}.spex_ticket_center{top:50%;margin-top:-56px}.spex_ticket_top{top:3%}.spex_ticket_top.spex_ticket_left,.spex_ticket_center.spex_ticket_left{left:-3px;padding:5px 5px 5px 8px;border-left:none}.spex_ticket_top.spex_ticket_right,.spex_ticket_center.spex_ticket_right{right:-3px;border-right:none}.spex_ticket_pic,.spex_ticket_pic img{position:relative;margin:0;padding:0;border:0}.spex_ticket_pic{margin:3px 0 0 0;overflow:hidden}.spex_ticket_pic img{vertical-align:top;margin:0 auto;width:53px}.spex_ticket_pic img.spex_ticket_img_hidden{display:none}.spex_ticket_user_points{display:none;width:50px;height:50px;margin:0 auto 5px auto;background-color:#2394d6;color:#fff;text-align:center;line-height:50px;font-size:12px;-moz-border-radius:50px;-webkit-border-radius:50px;border-radius:50px}.spex_ticket_btn{padding:0;margin:3px auto 0 auto;width:70px;height:26px;line-height:26px;font-size:10px;text-align:center;background-color:#ffa200;color:#fff3e1;-moz-border-radius:2px;-webkit-border-radius:2px;border-radius:2px}.spex_ticket_bottom{bottom:-3px;height:58px;width:180px;border-bottom:0;text-align:left}.spex_ticket .spex_popup_close{display:block;font-size:20px;width:15px;height:15px;position:absolute;right:2px;top:2px;z-index:99995}.spex_ticket .spex_popup_close:before{content:"×"}.spex_ticket.hiddenMode{transition:.5s ease;transform:translateX(83px)}.spex_ticket.hiddenMode:hover{transform:translateX(0)}.spex_ticket_bottom.spex_ticket_left{left:3%}.spex_ticket_bottom.spex_ticket_right{right:3%}.spex_ticket_bottom.spex_ticket_horiz_center{left:50%;margin-left:-93px}.spex_ticket_bottom .spex_ticket_pic{float:left;width:40px;height:40px;margin:0;padding:0}.spex_ticket_bottom .spex_ticket_pic img{width:40px;height:40px;margin:0}.spex_ticket_bottom .spex_ticket_text{float:right;width:130px}.spex_ticket_bottom .spex_ticket_btn{position:absolute;margin:0;margin-left:50px;margin-top:-10px}.spex_ticket_top.spex_ticket_horiz_center{top:-3px;height:58px;width:180px;border-top:0;text-align:left;left:50%;margin-left:-93px}.spex_ticket_top.spex_ticket_horiz_center .spex_ticket_pic{float:left;width:40px;height:40px;margin:0;padding:0}.spex_ticket_top.spex_ticket_horiz_center .spex_ticket_pic{position:relative;top:3px;width:40px;height:40px}.spex_ticket_top.spex_ticket_horiz_center .spex_ticket_pic img{position:relative;width:40px;height:40px}.spex_ticket_top.spex_ticket_horiz_center .spex_ticket_text{position:absolute;top:7px;left:55px;width:130px}.spex_ticket_top.spex_ticket_horiz_center .spex_ticket_btn{position:absolute;margin:0;margin-left:50px;margin-top:-7px}.spex_ticket_bottom .spex_ticket_pic .spex_ticket_user_points,.spex_ticket_top.spex_ticket_horiz_center .spex_ticket_user_points{width:40px;height:40px;line-height:40px;font-size:11px}.spex_notification{text-align:center;opacity:0;background-color:#d23336;color:#fff;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box}.spex_notification *{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box}.spex_notification .spex_notification_btn{padding:0;margin:3px auto 0 auto;width:70px;height:26px;line-height:26px;font-size:10px;text-align:center;background-color:#fff;color:#000;-moz-border-radius:2px;-webkit-border-radius:2px;border-radius:2px}.spex_notification .spex_notification_left{position:relative}.spex_notification .spex_notification_left:hover{cursor:pointer}.spex_notification .spex_notification_right{position:relative;z-index:99995;background-color:rgba(0,0,0,0.2);width:60px;height:60px;padding:10px}.spex_notification .spex_notification_pic{border:0;margin:0;padding:0;height:60px;width:60px;display:block}.spex_notification .spex_notification_points{background-color:#fb9400;color:#fff;line-height:60px;font-size:14px;height:60px;width:60px;-webkit-border-radius:60px;-moz-border-radius:60px;-ms-border-radius:60px;-o-border-radius:60px;border-radius:60px}.spex_notification.spex_notification_horizontal{width:210px;height:80px}.spex_notification.spex_notification_horizontal .spex_notification_left,.spex_notification.spex_notification_horizontal .spex_notification_right{float:left}.spex_notification.spex_notification_horizontal .spex_notification_left{width:120px;padding:10px 10px 0 0;height:70px}.spex_notification.spex_notification_horizontal .spex_notification_left .spex_notification_btn{width:90px}.spex_notification.spex_notification_vertical{width:80px}.spex_notification.spex_notification_vertical .spex_notification_left{padding:10px 0 10px 0}.spex_notification.spex_notification_vertical .spex_notification_left .spex_notification_btn{width:70px}.spex_notification .spex_notification_close_btn{z-index:99996;cursor:pointer;position:absolute;right:2px;top:2px;-webkit-border-radius:15px;-moz-border-radius:15px;-ms-border-radius:15px;-o-border-radius:15px;border-radius:15px;height:15px;width:15px;line-height:13px;text-align:center;color:#fff;background-color:rgba(255,255,255,0.3)}.spex_notification_pos_center{top:50%;margin-top:-40px}.spex_notification_pos_top{top:10px}.spex_notification_pos_bottom{bottom:10px}.spex_notification_pos_left{left:210px}.spex_notification_pos_right{right:210px}.spex_notification_horizontal.spex_notification_pos_horiz_center{left:50%;margin-left:-105px}.spex_notification_vertical.spex_notification_pos_horiz_center{left:50%;margin-left:-40px}.spex_notification_pos_top.spex_notification_horiz_center{top:10px;left:50%;margin-left:-105px}.push_custom_body{}.push_custom_icon{}.push_custom_button{}.push_custom_points{}.spex_custom_body{}.spex_custom_image{}.spex_custom_button{background:!important;background:linear-gradient(to bottom,1%,94%)!important;background:-moz-linear-gradient(top,1%,94%)!important;background:-webkit-gradient(linear,left top,left bottom,color-stop(1%,),color-stop(94%,))!important;background:-webkit-linear-gradient(top,1%,94%)!important;background:-o-linear-gradient(top,1%,94%)!important;background:-ms-linear-gradient(top,1%,94%)!important;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=&#39;#&#39;,endColorstr=&#39;&#39;,GradientType=0)!important;font-size:9px!important}.spex_custom_user_points_body{}.spex_custom_user_points{}@media only screen and (min-device-width :320px) and (max-device-width :480px){.spex_ticket{display:none}}');this.cacheElements();this.bindEvents();this.trigger('ready');if(this.options.publicKey!==''&&this.options.publicKey!=='none')
this.showPopup();},cacheElements:function(){this.popupContainerOverlay=document.createElement('div');this.popupContainerOverlay.id='spex_popup_overlay';this.popup=document.createElement('div');this.popup.className='spex_popup_wrapper';this.popup.innerHTML=this.getPopupLayout();document.body.appendChild(this.popupContainerOverlay);document.body.appendChild(this.popup);if(this.options.isTicketEnabled==undefined||this.options.isTicketEnabled==true){SPTicket.init(this.options);if(SPTicket.config.showUserPoints){this.showUserPoints();}}},bindEvents:function(){var self=SailPlayExternalApp;if(typeof SPTicket.hideBtn!=='undefined'){SPTicket.hideBtn.onclick=function(e){e.preventDefault();e.stopPropagation(); SPTicket.ticket.removeChild(SPTicket.hideBtn);SPTicket.ticket.classList.add('hiddenMode');if(!sailPlayUtils.getCookie('sp_popup_hidden_mode')){sailPlayUtils.setCookie('sp_popup_hidden_mode',true,{expires:(SailPlayExternalApp.options.btnHide*24*60*60)||0})}}}
document.getElementById('spex_close_btn').onclick=function(e){self.closePopup();};if(document.domain=='www.ticketland.ru'){self.popupContainerOverlay.onclick=function(e){self.runCallback('beforePopupClose');sailPlayUtils.hide(self.popupContainerOverlay);sailPlayUtils.hide(self.popup);self.isPopupVisible=false;self.runCallback('afterPopupClose');};}
var existKeyUpEvent=document.onkeyup;document.onkeyup=function(e){if(e.keyCode==27){self.runCallback('beforePopupClose');sailPlayUtils.hide(self.popupContainerOverlay);sailPlayUtils.hide(self.popup);self.isPopupVisible=false;self.runCallback('afterPopupClose');}
if(existKeyUpEvent!==undefined&&existKeyUpEvent!==null){existKeyUpEvent(e);}};if(typeof SPTicket.ticket!=='undefined'){SPTicket.ticket.onclick=function(e){self.runCallback('onTicketClick');self.showPopup();};}},getPopupLayout:function(){return''+'<div class="spex_popup" id="spex_popup">'+'<div id="spex_close_btn"></div>'+'<img id="spex_loader" src="'+this.staticUrl+'css/external/img/loader.gif" />'+'</div>';},showUserPoints:function(){var self=SailPlayExternalApp;self.api.getUserPoints({callback:function(data){if(data['status']=='ok'){if(data['points']&&data['points']['total']&&data['points']['total']>0){SPTicket.ticketPoints.innerHTML=data['points']['total'];SPTicket.ticketText.innerHTML=SPTicket.config.pointsText;sailPlayUtils.hide(SPTicket.ticketPic);sailPlayUtils.show(SPTicket.ticketPoints);}
else{SPTicket.ticketText.innerHTML=SPTicket.config.text;sailPlayUtils.hide(SPTicket.ticketPoints);sailPlayUtils.show(SPTicket.ticketPic);}}}});},getFrameSrc:function(opts){var self=SailPlayExternalApp,partnerId=self.options.partnerId||'';var src=self.popupUrl+'?partner_id='+encodeURIComponent(partnerId);if(self.options.depId)
src+='&dep_id='+encodeURIComponent(self.options.depId);if(self.options.publicKey)
src+='&public_key='+encodeURIComponent(self.options.publicKey);if(self.options.link)
src+='&link='+encodeURIComponent(self.options.link);if(self.options.pic)
src+='&pic='+encodeURIComponent(self.options.pic);if(self.options.authHash)
src+='&auth_hash='+encodeURIComponent(self.options.authHash);if(self.options.authHashIncreaseExpires)
src+='&auth_hash_increase_expires='+encodeURIComponent(self.options.authHashIncreaseExpires);if(self.options.originUserId)
src+='&origin_user_id='+encodeURIComponent(self.options.originUserId);if(self.options.userCategoryName)
src+='&user_category_name='+encodeURIComponent(self.options.userCategoryName);if(self.options.probableUserPhone)
src+='&probable_user_phone='+encodeURIComponent(self.options.probableUserPhone);if(self.options.extraParams){src+='&extra_params='+encodeURIComponent(JSON.stringify(self.options.extraParams));}
src+='&current_partner_url='+encodeURIComponent(window.location.href);src+='&from_sdk=1';opts=opts||self.options;if(typeof opts!=='undefined'){if(typeof opts.openTo!=='undefined'){src+='&open_to='+encodeURIComponent(opts.openTo.target);if(typeof opts.openTo.giftSku!=='undefined'&&opts.openTo.giftSku!=='')
src+='&gift_sku='+encodeURIComponent(opts.openTo.giftSku);}}
if(self.options.purchase){if(typeof self.options.purchase.originUserId=='undefined'){var originUserId=sailPlayUtils.getCookie('sp_origin_user_id');if(!originUserId){originUserId=sailPlayUtils.guid();sailPlayUtils.setCookie('sp_origin_user_id',originUserId,{expires:3600*24*700});}
self.options.purchase.originUserId=originUserId;}
if(typeof JSON!='undefined'&&typeof JSON.stringify!='undefined')
src+='&new_purchase='+JSON.stringify(self.options.purchase);else
console.log('Error. Provide purchase=1 to sailplay.js');}
return src;},_destroyIframe:function(){if(typeof this.iframe!=='undefined'&&this.iframe!=null){this.xdmSocket.destroy();}},_buildIframe:function(opts){var self=SailPlayExternalApp,popupContainer=document.getElementById('spex_popup');this.xdmSocket=new easyXDM.Socket({remote:self.getFrameSrc(opts),remoteHelper:self.sailPlayDomain+"/static/easyxdm/name.html",container:popupContainer,onMessage:function(message,origin){var data=JSON.parse(message);if(data['reload']){self._destroyIframe();self._buildIframe();}
else{self.events.publish(data.eventName,data);}}});var onIframeLoad=function(){sailPlayUtils.hide(document.getElementById('spex_loader'));self.runCallback('onPopupLoaded');};this.iframe=popupContainer.getElementsByTagName('iframe')[0];this.iframe.scrolling='no';this.iframe.height='710px';if(this.iframe.attachEvent){this.iframe.attachEvent('onload',onIframeLoad);}else{this.iframe.onload=onIframeLoad;}},_showPopup:function(opts){var self=SailPlayExternalApp,popupContainer=document.getElementById('spex_popup');sailPlayUtils.show(self.popupContainerOverlay);self.popup.style.top=sailPlayUtils.scrollPosition().top+40+'px';sailPlayUtils.show(self.popup);existIframe=popupContainer.getElementsByTagName('iframe');if(existIframe.length==0){self._buildIframe(opts);}},showPopup:function(opts){opts=opts||{};var self=SailPlayExternalApp;var isSafari=navigator.userAgent.match(/safari/i)!=null&&navigator.userAgent.match(/chrome/i)==null;console.log(navigator.userAgent);var popupWindow=function(url,title,w,h){var width,height,left,top;if(w!==undefined&&h!==undefined){width=w;height=h;left=(screen.width/2)-(w/2);top=(screen.height/2)-(h/2);}else{width=screen.width/2;height=screen.height/2;left=width-(width/2);top=height-(height/2);}
return window.open(url,'_system','toolbar=no, location=no, directories=no, status=no, menubar=no, copyhistory=no, width='+width+', height='+height+', top='+0+', left='+0);};function show_popup(callback){var sp_popup=popupWindow(self.getFrameSrc(opts),false,5,5);setTimeout(function(){sp_popup&&sp_popup.close();callback&&callback();},1500)}
if(isSafari){show_popup(function(){var popupContainerLoad=setInterval(function(){if(typeof self.popupContainerOverlay=='undefined'){return;}
else{self.isPopupVisible=true;clearInterval(popupContainerLoad);self.runCallback('beforePopupOpen');if(opts.openReload){self._destroyIframe();}
self._showPopup(opts);self.runCallback('afterPopupOpen');}},5);});}
else{var popupContainerLoad=setInterval(function(){if(typeof self.popupContainerOverlay=='undefined'){return;}
else{self.isPopupVisible=true;clearInterval(popupContainerLoad);self.runCallback('beforePopupOpen');if(opts.openReload){self._destroyIframe();}
self._showPopup(opts);self.runCallback('afterPopupOpen');}},5);}},closePopup:function(){var self=SailPlayExternalApp;self.runCallback('beforePopupClose');sailPlayUtils.hide(self.popupContainerOverlay);sailPlayUtils.hide(self.popup);self.isPopupVisible=false;self.runCallback('afterPopupClose');},bindCallback:function(eventName,fn){this.callbacks[eventName]=fn;},initApi:function(opts){this.api={getUserPoints:function(params){sailPlayUtils.JSONP.get(opts.apiDomain+'/js-api/'+opts.partnerId+'/users/points/',{origin_user_id:opts.originUserId||params.originUserId||'',store_department_id:opts.depId||''},params.callback);},users:{update:function(params){params['store_department_id']=opts.depId||'';var callback=params.callback||function(data){};if(params.callback)
delete params.callback;sailPlayUtils.JSONP.get(opts.apiDomain+'/js-api/'+opts.partnerId+'/users/update/',params,callback);}},customVariables:{add:function(params){params['store_department_id']=opts.depId||'';var callback=params.callback||function(data){};if(params.callback)
delete params.callback
sailPlayUtils.JSONP.get(opts.apiDomain+'/js-api/'+opts.partnerId+'/users/custom-variables/add/',params,callback);}},loyalty:{calcPoints:function(params){params['store_department_id']=opts.depId||'';var callback=params.callback||function(data){};if(params.callback)
delete params.callback;sailPlayUtils.JSONP.get(opts.apiDomain+'/js-api/'+opts.partnerId+'/users/calc-points/',params,callback);},selaPoints:function(params){params['store_department_id']=opts.depId||'';var callback=params.callback||function(data){};if(params.callback)
delete params.callback;sailPlayUtils.JSONP.get(opts.apiDomain+'/js-api/'+opts.partnerId+'/users/sela-points/',params,callback);}}};this.events={subscribers:{},subscribe:function(eventName,callback){this.subscribers[eventName]=callback;var self=this;},publish:function(eventName,data){if(typeof this.subscribers[eventName]!=='undefined'){this.subscribers[eventName](data);}}};this.tags=function(params){params['store_department_id']=params['store_department_id']||opts.depId||'';if(typeof params['tags']!='undefined')
params['tags']=params['tags'].join();var callback=params.callback||function(data){};sailPlayUtils.JSONP.get(opts.apiDomain+'/js-api/'+opts.partnerId+'/tags/'+params['action']+'/',params,callback);};}};var _sp_interval=window.setInterval(function(){if(document.body!==null&&typeof _sp_options!==undefined){window._sp_options=window._sp_options||{position:['top','right'],publicKey:'none'};window._sp_options.partnerId='713';window.clearInterval(_sp_interval);window.SP=window.SP||SailPlayExternalApp;window.SP.init(_sp_options);if(typeof window.SPready!=='undefined'){window.SPready(window.SP);}
if(sailPlayUtils.GETParams()['sp_autoopen']=='1')window.SP.showPopup();}},500);
SailPlayExternalApp.leads=function(){var template='<div class="sp_transclude" style="display: none;" data-sp-lead="[[name]]">'+'<form class="sp_forms"  style="background:[[background]];)">'+'<button class="sp_cancel_btn" type="button" data-sp-lead-cancel="[[name]]"><span>&#215;</span></button>'+'<div class="sp_inputs">'+'<div class="sp_values">'+'<div class="sp_field_container">'+'<div class="sp_error">Необходимо указать имя</div>'+'<input type="text" name="firstName" placeholder="Ваше имя" data-sp-validation="required"/>'+'</div>'+'<div class="sp_field_container">'+'<div class="sp_error">Необходимо указать e-mail</div>'+'<input type="email" name="email" placeholder="Ваш E-Mail" data-sp-validation="required,email"/>'+'</div>'+'<button class="sp_btn" type="submit" data-sp-lead-submit="[[name]]">Подписаться</button>'+'</div>'+'<div style="display: none;"  class="sp_info">'+'<div>Вы успешно подписались. Спасибо.</br>'+'Это окно закроется через: <span class="sp_timer"></span> секунд'+'</div>'+'</div>'+'</div>'+'</form>'+'</div>'; function init(){ setupLeads(); bindEvents(); SailPlayExternalApp.trigger('spLeadsReady');}
function renderLeads(parent,rLeads){parent=parent.nodeName?parent:document.body;if(!Array.isArray(rLeads))rLeads=[rLeads];sailPlayUtils.forEach(rLeads,function(lead){var leadTemplate=template.replace(/\[\[name\]\]/g,lead.name).replace(/\[\[background\]\]/g,"url('"+lead.background+"') no-repeat");parent.innerHTML+=leadTemplate;});init();sailPlayUtils.forEach(rLeads,function(leadObj){var lead=SP.leads.getLead(leadObj.name);if(!lead)return;var values=lead.container.getElementsByClassName('sp_values')[0];var errors=lead.container.getElementsByClassName('sp_error');var info=lead.container.getElementsByClassName('sp_info')[0];var timer=info.getElementsByClassName('sp_timer')[0];var time=5;lead.onSubmit=function(res){if(res.status=='ok'){sailPlayUtils.forEach(errors,function(err){err.style.display='none';});SP.tags({action:'add',tags:leadObj.tags,email:lead.fields['email'].value});values.style.display='none';info.style.display='block';timer.innerHTML=time;var timerInterval=setInterval(function(){if(time==0){clearInterval(timerInterval);SailPlayExternalApp.trigger('SP_lead_submit_succefull',[res,lead]);}
time-=1;timer.innerHTML=time;},1000);}
else{sailPlayUtils.forEach(errors,function(err){err.style.display='inline-block';});SailPlayExternalApp.trigger('SP_lead_submit_error',[res,lead]);}};lead.onCancel=function(){lead.container.style.display='none';SailPlayExternalApp.trigger('SP_lead_cancel',lead);};});}; var leads={};function setupLeads(){var leadElms=sailPlayUtils.getElementsByAttribute('data-sp-lead');sailPlayUtils.forEach(leadElms,function(lead){var name=lead.getAttribute('data-sp-lead');leads[name]={container:lead,fields:lead.getElementsByTagName('input'),submit:sailPlayUtils.getElementsByAttributeValue('data-sp-lead-submit',name)[0],cancel:sailPlayUtils.getElementsByAttributeValue('data-sp-lead-cancel',name)[0],status:function(){return sailPlayUtils.getCookie('sp_lead_'+name)||'initial';},onSubmit:function(){},onCancel:function(){}};});} 
function bindEvents(){for(var l in leads){var lead=leads[l];if(lead.submit){lead.submit.onclick=(function(){var name=l;var ld=lead;return function(e){e.preventDefault();submitLead(name,ld.onSubmit);}}());}
if(lead.cancel){lead.cancel.onclick=(function(){var name=l;var ld=lead;return function(e){e.preventDefault();cancelLead(name,ld.onCancel);}}());}}} 
function submitLead(name,callback){sailPlayUtils.setCookie('sp_lead_'+name,'submitted');var reqData={};sailPlayUtils.forEach(leads[name].fields,function(field){reqData[field.name]=field.value;});sailPlayUtils.setCookie('sp_lead_user',JSON.stringify(reqData));if(callback)reqData.callback=callback;SailPlayExternalApp.api.users.update(reqData);} 
function cancelLead(name,callback){sailPlayUtils.setCookie('sp_lead_'+name,'canceled');callback&&callback();} 
SailPlayExternalApp.on('ready',init);return{ init:init, render:renderLeads, getLead:function(name){return leads[name]||null;}, submitLead:submitLead, cancelLead:cancelLead, destroyLead:function(name){if(leads[name]){delete leads[name];}}};}();SailPlayExternalApp.validation=function(){var inputs=[];var validate={email:function(value){var re=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return re.test(value);},required:function(value){return value!==null&&value!==''&&value!==undefined;},phone:function(value){var digits=value.replace(/\D/g,'');return digits.length>6&&digits.length<14;},password:function(value){var pass=/^[\S]{8,}$/;return pass.test(value);},url:function(value){var url=/[\.][a-zA-Z]{2,}/g;var spaces=/\s/g;return!spaces.test(value)&&url.test(value);}};function init(){inputs=sailPlayUtils.getElementsByAttribute('data-sp-validation');sailPlayUtils.forEach(inputs,function(input){input.onkeyup=(function(){var types=input.getAttribute('data-sp-validation');if(types)types=types.replace(' ','').split(',');return function(){var valid=true;sailPlayUtils.forEach(types,function(type){if(validate[type]&&!validate[type](input.value)){valid=false;}
else if(!validate[type]){console.log('Wrong validation type: '+type);}});valid?sailPlayUtils.removeClass(input,'sp_validation_error'):sailPlayUtils.addClass(input,'sp_validation_error');}}());});} 
SailPlayExternalApp.on('ready',init);return{email:validate.email,phone:validate.phone,required:validate.required,password:validate.password,url:validate.url};}();SailPlayExternalApp.widgets=function(){var baseWidgetsUrl=null;var widgetsRegistry={}; function init(){ baseWidgetsUrl=SailPlayExternalApp.sailPlayDomain+'/popup/'+SailPlayExternalApp.options.partnerId+'/widgets/custom/';setupWidgets(); SailPlayExternalApp.trigger('spWidgetsReady');}
function setupWidgets(){var widgets=sailPlayUtils.getElementsByAttribute('data-sp-widget');sailPlayUtils.forEach(widgets,function(widget){var alias=widget.getAttribute('data-sp-widget'),options='';if(widget.getAttribute('data-sp-widget-auto-resize')){options+='&auto_resize=1';}
var xdmSocket=new easyXDM.Socket({remote:baseWidgetsUrl+alias+'?auth_hash='+SailPlayExternalApp.options.authHash+options,remoteHelper:self.sailPlayDomain+"/static/easyxdm/name.html",container:widget,onMessage:function(message,origin){var data=JSON.parse(message);this.container.getElementsByTagName("iframe")[0].style.height=data['height']+"px";},props:{style:{border:0,width:widget.getAttribute('data-sp-widget-width')+'px',height:widget.getAttribute('data-sp-widget-height')+'px'},scrolling:'no'}});var frame=widget.getElementsByTagName("iframe");widgetsRegistry[alias]={xdmSocket:xdmSocket};});}
SailPlayExternalApp.on('ready',init);return{widgetsRegistry:widgetsRegistry}}();